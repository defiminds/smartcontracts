<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Lista de diretórios</title>
	<style>
		body {
			font-family: Arial, sans-serif;
			margin: 0;
			padding: 0;
		}
		#container {
			display: flex;
			flex-wrap: wrap;
			justify-content: space-around;
			align-items: center;
			padding: 20px;
			background-color: #f0f0f0;
		}
		.item {
			display: flex;
			flex-direction: column;
			align-items: center;
			width: 200px;
			height: 200px;
			margin: 10px;
			padding: 10px;
			background-color: white;
			box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.1);
			transition: transform 0.2s ease-in-out;
		}
		.item:hover {
			transform: scale(1.1);
		}
		.item img {
			max-width: 100%;
			max-height: 100%;
		}
		.item a {
			text-decoration: none;
			color: black;
			font-weight: bold;
			margin-top: 10px;
		}
	</style>
</head>
<body>
	<h1>Lista de diretórios</h1>
	<div id="container">
		<!-- Os itens do diretório serão adicionados aqui pelo JavaScript -->
	</div>
	<script>
		// Define a função para carregar a lista de arquivos e pastas
		function loadDirectoryList() {
			var container = document.getElementById("container");
			container.innerHTML = ""; // Limpa o conteúdo anterior

			// Faz uma requisição HTTP GET para obter a lista de arquivos e pastas
			var xhr = new XMLHttpRequest();
			xhr.open("GET", ".", true);
			xhr.onload = function() {
				if (xhr.status == 200) {
					// Converte a resposta em HTML usando um objeto DOM temporário
					var tmp = document.createElement("div");
					tmp.innerHTML = xhr.response;
					var links = tmp.getElementsByTagName("a");

					// Adiciona cada item do diretório ao container
					for (var i = 0; i < links.length; i++) {
						var link = links[i];
						var item = document.createElement("div");
						item.className = "item";
						if (link.href.endsWith("/")) {
							// É uma pasta
							item.innerHTML = "<img src='folder.png'>" +
								"<a href='" + link.href + "'>" + link.textContent + "</a>";
						} else {
							// É um arquivo
							item.innerHTML = "<img src='file.png'>" +
								"<a href='" + link.href + "' download>" + link.textContent + "</a>";
						}
						container.appendChild(item);
					}
				} else {
					// Mostra uma mensagem de erro se a requisição falhar
					container.innerHTML = "Erro " + xhr.status + ": " + xhr.statusText;
				}
			};
			xhr.onerror = function() {
				// Mostra uma mensagem de erro se a requisição falhar
				container.innerHTML = "Erro de rede.";
			};
			xhr.send();
		}

		// Chama a função inicialmente para carregar a lista de arquivos e
		loadDirectoryList();
	// Define um intervalo para atualizar a lista de arquivos automaticamente a cada 5 segundos
	setInterval(function() {
		loadDirectoryList();
	}, 5000);
</script>
</body>
</html>
